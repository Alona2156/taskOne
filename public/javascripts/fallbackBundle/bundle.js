!function(e){var n={};function t(u){if(n[u])return n[u].exports;var r=n[u]={i:u,l:!1,exports:{}};return e[u].call(r.exports,r,r.exports,t),r.l=!0,r.exports}t.m=e,t.c=n,t.d=function(e,n,u){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:u})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var u=Object.create(null);if(t.r(u),Object.defineProperty(u,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)t.d(u,r,function(n){return e[n]}.bind(null,r));return u},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=3)}([function(module,__webpack_exports__,__webpack_require__){"use strict";function makeCount(){var lastCharacter=self.view.numberInput.value.slice(-1).charCodeAt(0);!0!==/[-+*\/^√]/.test(lastCharacter)&&(self.closeBrackets(),1===self.exponent&&self.raiseToExponent(),!0===/√/.test(self.view.numberInput.value)&&self.handleSquareRoot(),self.view.numberInput.value=eval(self.view.numberInput.value),-1===self.view.numberInput.value.indexOf(NaN)&&-1===self.view.numberInput.value.indexOf("Infinity")||(self.view.numberInput.value="Cannot be counted"),self.view.counted=1,self.numberLength=self.view.numberInput.value.length,"-"===self.view.numberInput.value[0]?(self.turnToNegative=1,self.numberLength=self.view.numberInput.value.length-1):self.turnToNegative=0)}__webpack_require__.d(__webpack_exports__,"a",function(){return makeCount})},function(module,__webpack_exports__,__webpack_require__){"use strict";function countExponentBrackets(regexp,numberOfRegexp,numberToFind){for(var allNumbersToFind=self.view.numberInput.value.match(regexp),indexFrom=0,exponentsToCount=[],i=0;i<numberOfRegexp;i++){var allNumbers=allNumbersToFind[i];if("first"===numberToFind){var firstNumber=allNumbers.match(/(.*)\^/)[1],expression=self.expressionBetweenBrackets("^",indexFrom,"after"),secondNumberBrackets=self.view.numberInput.value.slice(expression.signIndex+1,expression.closingBracketIndex+1),secondNumber=eval(secondNumberBrackets),expressionToReplace=firstNumber+"^"+secondNumberBrackets;indexFrom=expression.closingBracketIndex}if("second"===numberToFind){var secondNumber=allNumbers.match(/\^(.*)/)[1],expression=self.expressionBetweenBrackets("^",indexFrom,"before"),firstNumberBrackets=self.view.numberInput.value.slice(expression.openingBracketIndex,expression.signIndex),firstNumber=eval(firstNumberBrackets),expressionToReplace=firstNumberBrackets+"^"+secondNumber;indexFrom=expression.signIndex+1}exponentsToCount.push({firstNumber:firstNumber,secondNumber:secondNumber,expressionToReplace:expressionToReplace})}exponentsToCount.forEach(function(e){var n=Math.pow(e.firstNumber,e.secondNumber),t=self.view.numberInput.value.replace(e.expressionToReplace,n);self.view.numberInput.value=t})}__webpack_require__.d(__webpack_exports__,"a",function(){return countExponentBrackets})},function(module,__webpack_exports__,__webpack_require__){"use strict";function countRootBrackets(bracket){for(var numberOfRoots=self.view.numberInput.value.match(bracket).length,indexFrom=0,rootsToCount=[],i=0;i<numberOfRoots;i++){var expression=self.expressionBetweenBrackets("√",indexFrom,"after"),numberForSquareRoot=eval(self.view.numberInput.value.slice(expression.signIndex+2,expression.closingBracketIndex)),expressionToReplace=self.view.numberInput.value.slice(expression.signIndex,expression.closingBracketIndex+1);rootsToCount.push({numberForSquareRoot:numberForSquareRoot,expressionToReplace:expressionToReplace}),indexFrom=expression.closingBracketIndex}rootsToCount.forEach(function(e){var n=self.view.numberInput.value.replace(e.expressionToReplace,Math.sqrt(e.numberForSquareRoot));self.view.numberInput.value=n})}__webpack_require__.d(__webpack_exports__,"a",function(){return countRootBrackets})},function(e,n,t){"use strict";t.r(n);var u=t(0);var r=t(1);var s=t(2);new class{constructor(e){this.view=e,this.isSign=/^4[0-35-7]$|^8730$/,this.isDigit=/^4[89]$|^5[0-7]$/,this.backspace="&lt;=",this.numberLength=1,this.turnToNegative=0,this.exponent=0,self=this}init(){this.view.initDOM(),this.view.attachHandlers()}printToInput(e){return function(e){e.preventDefault();var n=self.view.numberInput.value.slice(-1);if(!0===/[a-z]/i.test(n)&&self.makeInputEmpty(),1!=self.numberLength||!0!==self.isDigit.test(e.charCode)||"0"===self.view.numberInput.value||0!=n)if(13===e.keyCode||61===e.charCode)this.makeCount();else if(40===e.charCode||41===e.charCode)self.handleBrackets();else if(46===e.charCode)self.handleDot();else if(this.isDigit.test(e.charCode))this.printNumber(e.key);else if(94===e.charCode)self.exponentBehavior(e.key);else if(8730===e.charCode)self.squareRootBehavior("√");else{if(!this.isSign.test(e.charCode)||this.view.numberInput.value.slice(-1)===e.key)return;this.printSign(e.key)}}.call(this,e)}chooseNumber(){return function(){var e=self.view.numberInput.value.slice(-1);"Cannot be counted"===self.view.numberInput.value&&self.makeInputEmpty();var n=this.innerHTML;1==self.numberLength&&!0===self.isDigit.test(n.charCodeAt(0))&&"0"!==self.view.numberInput.value&&0==e||("C"===n?self.makeInputEmpty():n===self.backspace?self.handleBackspace():"( )"===n?self.handleBrackets():"+ / -"===n?self.handleNegativeValue():self.isDigit.test(n.charCodeAt(0))?self.printNumber(n):46===n.charCodeAt(0)?self.handleDot():self.isSign.test(n.charCodeAt(0))&&8730!==n.charCodeAt(0)?self.printSign(n):61===n.charCodeAt(0)?self.makeCount():"X<sup>d</sup>"===n?self.exponentBehavior("^"):"√&nbsp;x&nbsp;"===n?self.squareRootBehavior("√"):console.log("other option"))}.call(this)}makeInputEmpty(){return function(){self.view.numberInput.value="0",self.numberLength=1}.call()}printNumber(e){return function(e){if("0"===self.view.numberInput.value||1===self.view.counted)self.view.numberInput.value=parseFloat(e),self.view.counted=0,self.numberLength=1;else{if(!(self.numberLength<15))return;self.view.numberInput.value+=parseFloat(e),self.numberLength++}}.call(this,e)}printSign(e){return function(e){var n=self.view.numberInput.value.slice(-1);!0===/[(]/.test(n)&&!0===/[+*\/]/.test(e)||!0===/[-+*\/]/.test(n)&&!0===/[-+*\/]/.test(e)||("."===e?(self.view.counted=0,self.view.numberInput.value+=e,self.numberLength++):"-"===e&&!0===/[\^]/.test(n)?self.handleNegativeValue():(self.view.counted=0,self.view.numberInput.value+=e,self.numberLength=0,self.turnToNegative=0))}.call(this,e)}makeCount(){return u.a.call()}backspaceKeyBehavior(e){return function(e){8===e.keyCode&&(e.preventDefault(),self.handleBackspace())}.call(this,e)}handleBrackets(){return function(){var e=self.view.numberInput.value.slice(-1);if("0"===self.view.numberInput.value||""===self.view.numberInput.value){self.view.numberInput.value="";var n="("}else{var t=self.view.numberInput.value.lastIndexOf("("),u=self.view.numberInput.value.lastIndexOf(")");if((u>t||-1===t)&&!0===/[-+*\/^√(]/.test(e))n="(";else if(!0===/[-+*\/^√(]/.test(e))n="(";else if((u>t||-1===t)&&!0===/[\d\)]/.test(e)){if(!(null!==self.view.numberInput.value.match(/\(/g)&&self.view.numberInput.value.match(/\(/g).length>self.view.numberInput.value.match(/\)/g).length))return;n=")"}else{if(!(t>u||-1!==t&&-1===u)||!0!==/\d/.test(e))return;n=")"}}self.printSign(n)}.call()}handleNegativeValue(){return function(){if(!0===/^-\d+$/.test(self.view.numberInput.value)||!0===/^-\d+?\.?\d+$/.test(self.view.numberInput.value))self.view.numberInput.value=self.view.numberInput.value.substr(1,self.view.numberInput.value.length),self.turnToNegative=0;else if(0===self.turnToNegative&&self.numberLength>0){var e=self.view.numberInput.value.length-self.numberLength;self.view.numberInput.value=self.view.numberInput.value.substr(0,e)+"(-"+self.view.numberInput.value.substr(e,self.numberLength),self.turnToNegative=1}else if(1===self.turnToNegative&&!0===/[(](-)/.test(self.view.numberInput.value)){var n=self.view.numberInput.value.length-self.numberLength;self.view.numberInput.value=self.view.numberInput.value.substr(0,n-2)+self.view.numberInput.value.substr(n,self.numberLength+2),self.turnToNegative=0}else!0===/[-+*^]/.test(self.view.numberInput.value.slice(-1))&&(self.printSign("("),self.printSign("-"),self.turnToNegative=1)}.call()}raiseToExponent(){return function(){var e=self.view.numberInput.value.match(/(\d+(\.\d*)?)\^(\d+(\.\d*)?)/g);null!==e&&self.countExponent(e);var n=/(\d+(\.\d*)?)\)\^(\d+(\.\d*)?)/g,t=self.view.numberInput.value.match(n);if(null!==t){var u=t.length;self.countExponentBrackets(n,u,"second")}var r=/(\d+(\.\d*)?)\^\((\d+(\.\d*)?)/g,s=self.view.numberInput.value.match(r);null!==s&&(u=s.length,self.countExponentBrackets(r,u,"first"))}.call()}handleSquareRoot(){return function(){var e=/√(\d+)/g,n=/√(\d+\.\d+)/g,t=/√(\()/g;!0===n.test(self.view.numberInput.value)&&self.countRootExpression(n),!0===e.test(self.view.numberInput.value)&&self.countRootExpression(e),!0===t.test(self.view.numberInput.value)&&self.countRootBrackets(t)}.call(this)}handleBackspace(){return function(){var e=self.view.numberInput.value.slice(-1);!0===/\d/.test(e)?self.numberLength--:!0===/(\D{2,})$/.test(self.view.numberInput.value)?self.numberLength=0:!0===/([^\D])(\D)$/.test(self.view.numberInput.value)&&(self.numberLength=/(\d+)(\D)$/.exec(self.view.numberInput.value)[1].length),self.view.numberInput.value=self.view.numberInput.value.slice(0,-1)}.call()}expressionBetweenBrackets(e,n,t){return function(e,n,t){var u=self.view.numberInput.value.indexOf(e,n),r=1,s=0,l=0;if("after"===t){for(var i=self.view.numberInput.value.length,a=u+2;a<i;a++)if(0!==r)"("===self.view.numberInput.value[a]?r++:")"===self.view.numberInput.value[a]&&r--,s=a;else if(0===r)break;return{signIndex:u,closingBracketIndex:s}}if("before"===t){for(a=u-2;a>-1;a--)if(0!==r)")"===self.view.numberInput.value[a]?r++:"("===self.view.numberInput.value[a]&&r--,l=a;else if(0===r)break;return{signIndex:u,openingBracketIndex:l}}}.call(this,e,n,t)}exponentBehavior(e){return function(e){!0===/\d|\)/.test(this.view.numberInput.value.slice(-1))&&(this.printSign(e),this.exponent=1)}.call(this,e)}squareRootBehavior(e){return function(e){if(!0===/[-+*\/]/.test(self.view.numberInput.value.slice(-1)))self.printSign(e);else if("0"===self.view.numberInput.value)self.view.numberInput.value="",self.printSign(e);else if("0"!==self.numberLength&&")"!==self.view.numberInput.value.slice(-1)){var n=self.view.numberInput.value.length-self.numberLength;if("√"!==self.view.numberInput.value[n-1]){var t=self.view.numberInput.value.slice(0,n)+"√"+self.view.numberInput.value.slice(n);self.view.numberInput.value=t}}}.call(this,e)}closeBrackets(){return function(){if(null!==self.view.numberInput.value.match(/\(/g)){var e=self.view.numberInput.value.match(/\(/g).length;if(null!==self.view.numberInput.value.match(/\)/g))var n=self.view.numberInput.value.match(/\)/g).length;else n=0;for(var t=e-n,u=0;u<t;u++)self.printSign(")")}}.call()}handleDot(){return function(){if(!0===/\d/.test(self.view.numberInput.value.slice(-1))){var e=self.view.numberInput.value.slice(-self.numberLength);!0!==/\./.test(e)&&self.printSign(".")}}.call()}countExponent(e){return function(e){for(var n=e.length,t=e,u=0;u<n;u++){var r=t[u],s=r.match(/(.*)\^/)[1],l=r.match(/\^(.*)/)[1],i=Math.pow(s,l),a=self.view.numberInput.value.replace(r,i);self.view.numberInput.value=a}}.call(this,e)}countExponentBrackets(e,n,t){return r.a.call(this,e,n,t)}countRootExpression(e){return function(e){for(var n=self.view.numberInput.value.match(e).length,t=self.view.numberInput.value.match(e),u=0;u<n;u++){var r=t[u].slice(1),s=t[u],l=self.view.numberInput.value.replace(s,Math.sqrt(r));self.view.numberInput.value=l}}.call(this,e)}countRootBrackets(e){return s.a.call(this,e)}}(new class{initDOM(){this.numbers=document.getElementsByTagName("td"),this.numberInput=document.getElementById("numberInput"),this.numberInput.value=0,this.counted=0}attachHandlers(){this.numberInput.addEventListener("keypress",self.printToInput.bind(self)),this.numberInput.addEventListener("keydown",self.backspaceKeyBehavior.bind(self));for(var e=0;e<this.numbers.length;e++)this.numbers[e].addEventListener("click",self.chooseNumber)}}).init()}]);